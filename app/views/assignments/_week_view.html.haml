.choose_view
  .nav_view
    = link_to "Week", user_assignments_path(current_user, :query => 'week', :which => params[:which]), 
    {:class => "current"}
    = link_to "Month", user_assignments_path(current_user, :query => 'month', :which => params[:which])
  .rotate_through
    = link_to "Prev", user_assignments_path(current_user, :query => 'week', :which => params[:which].to_date.prev_week),
      {:class => "which_btn"}
    - @other_class = params[:which].to_date.beginning_of_week == Date.today.beginning_of_week ? "current" : nil
    = link_to "This Week", user_assignments_path(current_user, :query => 'week', :which => Date.today.beginning_of_week), 
      {:class => "which_btn #{@other_class}"}    
    = link_to "Next", user_assignments_path(current_user, :query => 'week', :which => params[:which].to_date.next_week), 
      {:class => "which_btn"}

- @key_to_day = {1 => "Monday", 2 => "Tuesday", 3 => "Wednesday", 4 => "Thursday", 5 => "Friday", 6 => "Saturday", 0 => "Sunday", }
.week
  -@as_grouped_sides.each do |side| 
    .side 
      - side.each do |dayn,as|
        -#- binding.pry
        - todayHuh = (Date.today.to_date === getDate(dayn, params[:which].to_date.beginning_of_week))
        - today_complete = true;
        - as.each do |a|
          - if !a.completed
            - today_complete = false;

        .assignment_box{:id => (todayHuh ? (today_complete ? "today_border" : "today_nc_border") : nil)} 
          %a.add_btn{:id => "day_#{dayn}"}
            .add_dialog
              = simple_form_for [current_user, @newa] do |f|
                = f.association :subject, collection: current_user.subjects    
                = f.input :description
                = f.input :due_date, :default => getDate(dayn, params[:which].to_date.beginning_of_week) + 23.hours + 59.minutes, 
                order: [:month, :day, :year]
                = f.input :completed, :label => "Completed?", :as => "radio_buttons"
                = f.submit "Add", :class => "add_dialog_submit"
              /* %form{class: "add_form", remote: true} */
              /*   Subject */
              /*   %select{:name => 'subject', :class => 'add_dropkick'} */
              /*     %option{:value => "Pick a subject"} */
              /*       Choose a subject */
              /*     - @ss.each do |s| */
              /*       %option */
              /*         = s.name */
              /*   Description */
              /*   %input{type: "text", name: "description"} */
              /*   Due on */
              /*   %input{type: "text", name: "date", class: "datepicker"} */
              /*   at */
              /*   .due_on_due_at */
              /*     %select{name: "hour"} */
              /*       - (0..23).each do |h| */
              /*         %option */ 
              /*           = h */
              /*     %select{name: "minute"} */
              /*       - (0..59).each do |m| */
              /*         %option */
              /*           = m */
              /*   Completed? */
              /*   .completed_radio_btns */
              /*     %input{type: "radio", name: "completed", value: "yes"} Yes */
              /*     %input{type: "radio", name: "completed", value: "no", checked: "true"} No */
              /*   // fake submit button */
              /*   .fake_submit_button */
              /*     Submit */

          %p.day_heading 
            = @key_to_day[dayn]
            = getDate(dayn, params[:which].to_date.beginning_of_week).to_formatted_s(:long)
            - if todayHuh
              %span Today
          - if !as.empty?
            - as.each do |a|
              .as_box{:class => (a.completed ? "completed" : "not_completed"), :"data-path" => user_assignment_path(current_user, a)}
                .due_time
                  -#= a.due_date.to_formatted_s(:long)
                  due at 
                  = a.due_date.strftime("%I:%M %P");
                .subject
                  = a.subject.name
                .description
                  = a.description
                .delete_btn
                  .delete_dialog{:title => "Delete Assignment"}
                    Are you sure you want to delete this assignment?
                    = link_to "Yes, delete this assignment", user_assignment_path(current_user, a), :method => :delete, :remote => true, tabindex: -1
                .edit_btn
                  .edit_dialog{:title => "Update Assignment"}
                    = simple_form_for [current_user, a], remote: true, html: {data: {type: 'json'}} do |f|
                      = f.association :subject, collection: current_user.subjects    
                      = f.input :description 
                      = f.input :due_date
                      = f.input :completed, :label => "Completed?", :as => "radio_buttons" 
                      = f.submit :class => "edit_dialog_submit"


